<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">


























































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico" />
<title>Audio and Video (1.5) | Android Developers</title>
<link href="../../../assets/android-developer-docs-devguide.css" rel="stylesheet" type="text/css" />
<script src="../../../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="../../../reference/lists.js" type="text/javascript"></script>
<script src="../../../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="../../../assets/android-developer-docs.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("../../../");
</script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
</head>

<body class="gc-documentation">

  <div id="header">
      <div id="headerLeft">
          <a href="../../../index.html" tabindex="-1"><img
              src="../../../assets/images/bg_logo.png" alt="Android Developers" /></a>
          <ul class="guide">
              <li id="home-link"><a href="../../../offline.html">
                  <span>Home</span></a></li>
              <li id="sdk-link"><a href="../../../sdk/1.5_r1/index.html"><span>SDK</span></a></li>
              <li id="guide-link"><a href="../../../guide/index.html"
                                  onClick="return loadLast('guide')"><span>Dev Guide</span></a></li>
              <li id="reference-link"><a href="../../../reference/packages.html" 
                                  onClick="return loadLast('reference')"><span>Reference</span></a></li>
              <li><a href="http://android-developers.blogspot.com"><span>Blog</span></a></li>
              <li id="community-link"><a href="../../../community/index.html"><span>Community</span></a></li>
          </ul>
      </div>
      <div id="headerRight">
          <div id="headerLinks">
            <!-- <img src="../../../assets/images/icon_world.jpg" alt="" /> -->
            <span class="text">
              <!-- &nbsp;<a href="#">English</a> | -->
              <a href="http://www.android.com">Android.com</a>
            </span>
          </div>
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off" 
                      title="search developer docs" name="q"
                      value="search developer docs" 
                      onFocus="search_focus_changed(this, true)" 
                      onBlur="search_focus_changed(this, false)" 
                      onkeydown="return search_changed(event, true, '../../../')" 
                      onkeyup="return search_changed(event, false, '../../../')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      </div><!-- headerRight -->
  </div><!-- header -->

  <div class="g-section g-tpl-240" id="body-content">
    <div class="g-unit g-first side-nav-resizable" id="side-nav">
      <div id="devdoc-nav"><ul>

<li><h2>Android Basics</h2>
    <ul>
      <li><a href="../../../guide/basics/what-is-android.html">What Is Android?</a></li>
<!--  <li><a style="color:gray;">The Android SDK</a></li> -->
<!--  <li><a style="color:gray;">Walkthrough for Developers</a></li> -->
      <!-- quick overview of what it's like to develop on Android -->
    </ul>
</li>

<li><h2>Framework Topics</h2>
    <ul>
      <li><a href="../../../guide/topics/fundamentals.html">Application Fundamentals</a></li>
    </ul>
    <ul>
      <li class="toggle-list">
        <div><a href="../../../guide/topics/ui/index.html">User Interface</a></div>
          <ul>
            <li><a href="../../../guide/topics/ui/declaring-layout.html">Declaring Layout</a></li>
            <li><a href="../../../guide/topics/ui/menus.html">Creating Menus</a></li>
            <li><a href="../../../guide/topics/ui/layout-objects.html">Common Layout Objects</a></li>
            <li><a href="../../../guide/topics/ui/binding.html">Binding to Data with AdapterView</a></li>
            <li><a href="../../../guide/topics/ui/ui-events.html">Handling UI Events</a></li>
            <li><a href="../../../guide/topics/ui/themes.html">Applying Styles and Themes</a></li>
            <li><a href="../../../guide/topics/ui/custom-components.html">Building Custom Components</a></li>
            <li><a href="../../../guide/topics/ui/how-android-draws.html">How Android Draws Views</a></li>
          </ul>
      </li>
      <li class="toggle-list">
        <div><a href="../../../guide/topics/resources/index.html">Resources and Assests</a></div>
          <ul>
            <li><a href="../../../guide/topics/resources/resources-i18n.html">Resources and I18n</a></li>
            <li><a href="../../../guide/topics/resources/available-resources.html">Available Resource Types</a></li>
          </ul>
      </li>
      <li><a href="../../../guide/topics/intents/intents-filters.html">Intents and Intent Filters</a></li>
      <li><a href="../../../guide/topics/data/data-storage.html">Data Storage</a></li>
      <li><a href="../../../guide/topics/providers/content-providers.html">Content Providers</a></li>
<!--  <li><a style="color:gray;">Notifications</a></li> -->
      <li><a href="../../../guide/topics/security/security.html">Security and Permissions</a></li>
<!--  <li><a style="color:gray;">Processes and Threads</a></li> -->
<!--  <li><a style="color:gray;">Interprocess Communication</a></li> -->
      <li class="toggle-list">
        <div><a href="../../../guide/topics/manifest/manifest-intro.html">The AndroidManifest.xml File</a></div>
          <ul>
            <li><a href="../../../guide/topics/manifest/action-element.html">&lt;action&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/activity-element.html">&lt;activity&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/activity-alias-element.html">&lt;activity-alias&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/application-element.html">&lt;application&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/category-element.html">&lt;category&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/data-element.html">&lt;data&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/grant-uri-permission-element.html">&lt;grant-uri-permission&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/instrumentation-element.html">&lt;instrumentation&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/intent-filter-element.html">&lt;intent-filter&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/manifest-element.html">&lt;manifest&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/meta-data-element.html">&lt;meta-data&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/permission-element.html">&lt;permission&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/permission-group-element.html">&lt;permission-group&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/permission-tree-element.html">&lt;permission-tree&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/provider-element.html">&lt;provider&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/receiver-element.html">&lt;receiver&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/service-element.html">&lt;service&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/uses-configuration-element.html">&lt;uses-configuration&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/uses-library-element.html">&lt;uses-library&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/uses-permission-element.html">&lt;uses-permission&gt;</a></li>
            <li><a href="../../../guide/topics/manifest/uses-sdk-element.html">&lt;uses-sdk&gt;</a></li>
          </ul>
      </li>
    </ul>
    <ul>
      <li class="toggle-list">
        <div><a href="../../../guide/topics/graphics/index.html">Graphics</a></div>
          <ul>
            <li><a href="../../../guide/topics/graphics/2d-graphics.html">2D Graphics</a></li>
            <li><a href="../../../guide/topics/graphics/opengl.html">3D with OpenGL</a></li>
          </ul>
      </li>
      <li><a href="../../../guide/topics/media/index.html">Audio and Video</a></li>
<!--       <li class="toggle-list">
        <div><a style="color:gray;">Sensors</a></div>
          <ul>
            <li><a style="color:gray;">Camera</a></li>
            <li><a style="color:gray;">Compass</a></li>
            <li><a style="color:gray;">Accelerometer</a></li>
          </ul>
      </li> -->
      <li><a href="../../../guide/topics/location/index.html">Location and Maps</a></li>
<!--    <li class="toggle-list">
        <div><a style="color:gray;">Wireless Controls</a></div>
          <ul>
            <li><a style="color:gray;">Wi-Fi</a></li>
            <li><a style="color:gray;">Bluetooth</a></li>
          </ul>
      </li> -->
<!--  <li><a style="color:gray;">Localization</a></li>  -->
    </ul>
</li>

<li><h2>Developing</h2>
    <ul>
      <!--       <li><a style="color:gray;">Developing for Android</a></li>
      signing, upgrading, selecting a package name, select device profile, touch, trackball, dpad available, etc. -->
      <li><a href="../../../guide/developing/eclipse-adt.html">In Eclipse, with ADT</a></li>
      <li><a href="../../../guide/developing/other-ide.html">In Other IDEs</a></li>
      <li><a href="../../../guide/developing/device.html">On a Device</a></li>
      <li><a href="../../../guide/developing/debug-tasks.html">Debugging Tasks</a></li>
      <li class="toggle-list">
        <div><a href="../../../guide/developing/tools/index.html">Tools</a></div>
          <ul>
			<li><a href="../../../guide/developing/tools/aapt.html">aapt</a></li>
			<li><a href="../../../guide/developing/tools/adb.html">adb</a></li>
			<li><a href="../../../guide/developing/tools/othertools.html#android">android</a></li>
<!--			<li><a href="../../../guide/developing/tools/adt.html">ADT Plugin</a></li>-->
			<li><a href="../../../guide/developing/tools/aidl.html" >aidl</a></li>
			<li><a href="../../../guide/developing/tools/avd.html" >AVDs</a></li>
			<li><a href="../../../guide/developing/tools/ddms.html" >ddms</a></li>
			<li><a href="../../../guide/developing/tools/othertools.html#dx">dx</a></li>
			<li><a href="../../../guide/developing/tools/draw9patch.html">Draw 9-Patch</a></li>
			<li><a href="../../../guide/developing/tools/emulator.html">Emulator</a></li>
			<li><a href="../../../guide/developing/tools/hierarchy-viewer.html">Hierarchy Viewer</a></li>
			<li><a href="../../../guide/developing/tools/othertools.html#mksdcard">mksdcard</a></li>
			<li><a href="../../../guide/developing/tools/monkey.html">Monkey</a></li>
			<li><a href="../../../guide/developing/tools/adb.html#sqlite">sqlite3</a></li>
			<li><a href="../../../guide/developing/tools/traceview.html" >Traceview</a></li>
		  </ul></li>
<!--      <li><a href="../../../guide/developing/instrumentation/index.html">Instrumentation</a></li>
      <li><a style="color:gray;">JUnit</a></li> -->
   </ul>

</li>

<li><h2>Publishing</h2>
    <ul>
      <li><a href="../../../guide/publishing/app-signing.html">Signing Your Applications</a></li>
      <li><a href="../../../guide/publishing/versioning.html">Versioning Your Applications</a></li>
      <li><a href="../../../guide/publishing/preparing.html">Preparing to Publish</a></li>
      <li><a href="../../../guide/publishing/publishing.html">Publishing Your Applications</a></li>
    </ul>
</li>

<li><h2>Best Practices</h2>
    <ul>
      <li><a href="../../../guide/practices/design/performance.html">Designing for Performance</a></li>
      <li><a href="../../../guide/practices/design/responsiveness.html">Designing for Responsiveness</a></li>
      <li><a href="../../../guide/practices/design/seamlessness.html">Designing for Seamlessness</a></li>
<!--  <li><a style="color:gray;">User Interface Guidelines</a></li> -->
    </ul>
</li>

<li><h2>Tutorials and Sample Code</h2>
    <ul>
      <li><a href="../../../guide/tutorials/hello-world.html">Hello World</a></li>
      <li><a href="../../../guide/tutorials/views/index.html">Hello Views</a></li>
      <li><a href="../../../guide/tutorials/notepad/index.html">Notepad Tutorial</a></li>
    </ul>
    <ul>
    
      <li><a href="../../../../samples">Sample Code &raquo;</a></li>
    
    </ul>
</li>



<li><h2>Appendix</h2>
    <ul>
      <li><a href="../../../guide/appendix/media-formats.html">Supported Media Formats</a></li>
      <li><a href="../../../guide/appendix/g-app-intents.html">Intents List: Google Apps</a></li>
      <li><a href="../../../guide/appendix/glossary.html">Glossary</a></li>
      <li><a href="../../../guide/appendix/faq/index.html">FAQ</a></li>
    </ul>
</li>

</ul>

<script type="text/javascript">
<!--
    buildToggleLists();
//-->
</script>

      </div>
    </div> <!-- end side-nav -->
    <script>
      addLoadEvent(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="g-unit" id="doc-content"><a name="top"></a>

<div id="jd-header" class="guide-header">
  <span class="crumb">
    &nbsp;
    
  </span>
<h1>Audio and Video</h1>
</div>

  <div id="jd-content">


    <div class="jd-descr">
    <div id="qv-wrapper">
    <div id="qv">

<h2>Audio/Video quickview</h2>
<ul>
<li>Audio playback and record</li>
<li>Video playback</li>
<li>Handles data from raw resources, files, streams</li>
<li>Built-in codecs for a variety of media. See <a href="../../../guide/appendix/media-formats.html">Android Supported Media Formats</a></li>
</ul>

<h2>Key classes</h2>
<ol>
<li><a href="../../../reference/android/media/MediaPlayer.html">MediaPlayer</a> (all audio and video formats)</li>
<li><a href="../../../reference/android/media/MediaRecorder.html">MediaRecorder</a> (record, all audio formats)</li>
</ol>

<h2>In this document</h2>
<ol>
<li><a href="#playback.html">Audio and Video Playback</a></li>
<li><a href="#capture">Audio Capture</a></li>
</ol>

<h2>See also</h2>
<ol>
<li><a href="../../../guide/topics/data/data-storage.html">Data Storage</a></li>
</ol>

</div>
</div>

<p>The Android platform offers built-in encoding/decoding for a variety of
common media types, so that you can easily integrate audio, video, and images into your
applications. Accessing the platform's media capabilities is fairly straightforward 
&mdash; you do so using the same intents and activities mechanism that the rest of
Android uses.</p>

<p>Android lets you play audio and video from several types of data sources. You
can play audio or video from media files stored in the application's resources
(raw resources), from standalone files in the filesystem, or from a data stream
arriving over a network connection. To play audio or video from your
application, use the <a href="../../../reference/android/media/MediaPlayer.html">MediaPlayer</a> class.</p>

<p>The platform also lets you record audio and video, where supported by the
mobile device hardware. To record audio or video, use the <a href="../../../reference/android/media/MediaRecorder.html">MediaRecorder</a> class. Note that the emulator doesn't have hardware
to capture audio or video, but actual mobile devices are likely to provide these
capabilities, accessible through the MediaRecorder class. </p>

<p>For a list of media formats for which Android offers built-in support,
see the <a href="../../../guide/appendix/media-formats.html">Android Media
Formats</a> appendix. </p>

<h2 id="play">Audio and Video Playback</h2>
<p>Media can be played from anywhere: from a raw resource, from a file from the system, 
or from an available network (URL).</p>
  
<p>You can play back the audio data only to the standard
output device; currently, that is the mobile device speaker or Bluetooth headset. You
cannot play sound files in the conversation audio. </p>

<h3 id="playraw">Playing from a Raw Resource</h3>
<p>Perhaps the most common thing to want to do is play back media (notably sound)
within your own applications. Doing this is easy:</p>
<ol>
  <li>Put the sound (or other media resource) file into the <code>res/raw</code>
  folder of your project, where the Eclipse plugin (or aapt) will find it and
  make it into a resource that can be referenced from your R class</li>
  <li>Create an instance of <code>MediaPlayer</code>, referencing that resource using
  <a href="../../../reference/android/media/MediaPlayer.html#create(android.content.Context, android.net.Uri)">MediaPlayer.create</a>, and then call
  <a href="../../../reference/android/media/MediaPlayer.html#start()">start()</a> on the instance:</li>
</ol>
<pre>
    MediaPlayer mp = MediaPlayer.create(context, R.raw.sound_file_1);
    mp.start();
</pre>
<p>To stop playback, call <a href="../../../reference/android/media/MediaPlayer.html#stop()">stop()</a>. If 
you wish to later replay the media, then you must 
<a href="../../../reference/android/media/MediaPlayer.html#reset()">reset()</a> and
<a href="../../../reference/android/media/MediaPlayer.html#prepare()">prepare()</a> the MediaPlayer object
before calling <a href="../../../reference/android/media/MediaPlayer.html#start()">start()</a> again. 
(<code>create()</code> calls <code>prepare()</code> the first time.)</p>
<p>To pause playback, call <a href="../../../reference/android/media/MediaPlayer.html#pause()">pause()</a>. 
Resume playback from where you paused with 
<a href="../../../reference/android/media/MediaPlayer.html#start()">start()</a>.</p>

<h3 id="playfile">Playing from a File or Stream</h3>
<p>You can play back media files from the filesystem or a web URL:</p>
<ol>
  <li>Create an instance of the <code>MediaPlayer</code> using <code>new</code></li>
  <li>Call <a href="../../../reference/android/media/MediaPlayer.html#setDataSource(android.content.Context, android.net.Uri)">setDataSource()</a>
    with a String containing the path (local filesystem or URL)
    to the file you want to play</li>
  <li>First <a href="../../../reference/android/media/MediaPlayer.html#prepare()">prepare()</a> then
  <a href="../../../reference/android/media/MediaPlayer.html#start()">start()</a> on the instance:</li>
</ol>
<pre>
    MediaPlayer mp = new MediaPlayer();
    mp.setDataSource(PATH_TO_FILE);
    mp.prepare();
    mp.start();
</pre>
<p><a href="../../../reference/android/media/MediaPlayer.html#stop()">stop()</a> and 
<a href="../../../reference/android/media/MediaPlayer.html#pause()">pause()</a> work the same as discussed
above.</p>
  <p class="note"><strong>Note:</strong> It is possible that <code>mp</code> could be
  null, so good code should <code>null</code> check after the <code>new</code>.
  Also, <code>IllegalArgumentException</code> and <code>IOException</code> either
  need to be caught or passed on when using <code>setDataSource()</code>, since
  the file you are referencing may not exist.</p>
<p class="note"><strong>Note:</strong>
If you're passing a URL to an online media file, the file must be capable of 
progressive download.</p>

<h2 id="capture">Audio Capture</h2>
<p>Audio capture from the device is a bit more complicated than audio/video playback, but still fairly simple:</p>
<ol>
  <li>Create a new instance of <a href="../../../reference/android/media/MediaRecorder.html">android.media.MediaRecorder</a> using <code>new</code></li>
  <li>Create a new instance of <a href="../../../reference/android/content/ContentValues.html">android.content.ContentValues</a> and put in some standard properties like
  <code>TITLE</code>, <code>TIMESTAMP</code>, and the all important 
  <code>MIME_TYPE</code></li>
  <li>Create a file path for the data to go to (you can use <a href="../../../reference/android/content/ContentResolver.html">android.content.ContentResolver</a> to
  create an entry in the Content database and get it to assign a path
  automatically which you can then use)</li>
  <li>Set the audio source using <a href="../../../reference/android/media/MediaRecorder.html#setAudioSource(int)">MediaRecorder.setAudioSource()</a>. You will probably want to use
  <code>MediaRecorder.AudioSource.MIC</code></li>
  <li>Set output file format using <a href="../../../reference/android/media/MediaRecorder.html#setOutputFormat(int)">MediaRecorder.setOutputFormat()</a>
  </li>
  <li>Set the audio encoder using 
        <a href="../../../reference/android/media/MediaRecorder.html#setAudioEncoder(int)">MediaRecorder.setAudioEncoder()</a>
  </li>
  <li>Call <a href="../../../reference/android/media/MediaRecorder.html#prepare()">prepare()</a> 
   on the MediaRecorder instance.</li>
  <li>To start audio capture, call 
  <a href="../../../reference/android/media/MediaRecorder.html#start()">start()</a>. </li>
  <li>To stop audio capture, call <a href="../../../reference/android/media/MediaRecorder.html#stop()">stop()</a>.
  <li>When you are done with the MediaRecorder instance, call
<a href="../../../reference/android/media/MediaRecorder.html#release()">release()</a> on it. </li>
</ol>

<h3>Example: Audio Capture Setup and Start</h3>
<p>The example below illustrates how to set up, then start audio capture.</p>
<pre>
    recorder = new MediaRecorder();
    ContentValues values = new ContentValues(3);

    values.put(MediaStore.MediaColumns.TITLE, SOME_NAME_HERE);
    values.put(MediaStore.MediaColumns.TIMESTAMP, System.currentTimeMillis());
    values.put(MediaStore.MediaColumns.MIME_TYPE, recorder.getMimeContentType());
    
    ContentResolver contentResolver = new ContentResolver();
    
    Uri base = MediaStore.Audio.INTERNAL_CONTENT_URI;
    Uri newUri = contentResolver.insert(base, values);
    
    if (newUri == null) {
        // need to handle exception here - we were not able to create a new
        // content entry
    }
    
    String path = contentResolver.getDataFilePath(newUri);

    // could use setPreviewDisplay() to display a preview to suitable View here
    
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(path);
    
    recorder.prepare();
    recorder.start();
</pre>
<h3>Stop Recording</h3>
<p>Based on the example above, here's how you would stop audio capture. </p>
<pre>
    recorder.stop();
    recorder.release();
</pre>


    </div>

  <a href="#top" style="float:right">&uarr; Go to top</a>
  
  </div>

<div id="footer">


  <div id="copyright">
    
  Except as noted, this content is licensed under <a
  href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>. 
  For details and restrictions, see the <a href="../../../license.html">
  Content License</a>.
  </div>
  <div id="build_info">
    
  Android 1.5&nbsp;r1 - 26  8月 2009 22:34

  </div>

  <div id="footerlinks">
    
  <p>
    <a href="http://www.android.com/terms.html">Site Terms of Service</a> -
    <a href="http://www.android.com/privacy.html">Privacy Policy</a> -
    <a href="http://www.android.com/branding.html">Brand Guidelines</a>
  </p>
  </div>

</div> <!-- end footer -->

</div><!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize android-developer-docs.js */
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5831155-1");
pageTracker._trackPageview();
</script>

</body>
</html>



